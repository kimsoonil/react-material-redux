{"ast":null,"code":"/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\nimport { StringUtils } from \"./utils/StringUtils\";\nimport { libraryVersion } from \"./utils/Constants\";\nexport var LogLevel;\n\n(function (LogLevel) {\n  LogLevel[LogLevel[\"Error\"] = 0] = \"Error\";\n  LogLevel[LogLevel[\"Warning\"] = 1] = \"Warning\";\n  LogLevel[LogLevel[\"Info\"] = 2] = \"Info\";\n  LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\n})(LogLevel || (LogLevel = {}));\n\nvar Logger =\n/** @class */\nfunction () {\n  function Logger(localCallback, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    /**\r\n     * @hidden\r\n     */\n\n\n    this.level = LogLevel.Info;\n    var _a = options.correlationId,\n        correlationId = _a === void 0 ? \"\" : _a,\n        _b = options.level,\n        level = _b === void 0 ? LogLevel.Info : _b,\n        _c = options.piiLoggingEnabled,\n        piiLoggingEnabled = _c === void 0 ? false : _c;\n    this.localCallback = localCallback;\n    this.correlationId = correlationId;\n    this.level = level;\n    this.piiLoggingEnabled = piiLoggingEnabled;\n  }\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.logMessage = function (logLevel, logMessage, containsPii) {\n    if (logLevel > this.level || !this.piiLoggingEnabled && containsPii) {\n      return;\n    }\n\n    var timestamp = new Date().toUTCString();\n    var log;\n\n    if (!StringUtils.isEmpty(this.correlationId)) {\n      log = timestamp + \":\" + this.correlationId + \"-\" + libraryVersion() + \"-\" + LogLevel[logLevel] + (containsPii ? \"-pii\" : \"\") + \" \" + logMessage;\n    } else {\n      log = timestamp + \":\" + libraryVersion() + \"-\" + LogLevel[logLevel] + (containsPii ? \"-pii\" : \"\") + \" \" + logMessage;\n    }\n\n    this.executeCallback(logLevel, log, containsPii);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.executeCallback = function (level, message, containsPii) {\n    if (this.localCallback) {\n      this.localCallback(level, message, containsPii);\n    }\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.error = function (message) {\n    this.logMessage(LogLevel.Error, message, false);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.errorPii = function (message) {\n    this.logMessage(LogLevel.Error, message, true);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.warning = function (message) {\n    this.logMessage(LogLevel.Warning, message, false);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.warningPii = function (message) {\n    this.logMessage(LogLevel.Warning, message, true);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.info = function (message) {\n    this.logMessage(LogLevel.Info, message, false);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.infoPii = function (message) {\n    this.logMessage(LogLevel.Info, message, true);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.verbose = function (message) {\n    this.logMessage(LogLevel.Verbose, message, false);\n  };\n  /**\r\n   * @hidden\r\n   */\n\n\n  Logger.prototype.verbosePii = function (message) {\n    this.logMessage(LogLevel.Verbose, message, true);\n  };\n\n  Logger.prototype.isPiiLoggingEnabled = function () {\n    return this.piiLoggingEnabled;\n  };\n\n  return Logger;\n}();\n\nexport { Logger };","map":{"version":3,"sources":["../src/Logger.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["/*\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License.\r\n */\r\nimport { StringUtils } from \"./utils/StringUtils\";\r\nimport { libraryVersion } from \"./utils/Constants\";\r\nexport var LogLevel;\r\n(function (LogLevel) {\r\n    LogLevel[LogLevel[\"Error\"] = 0] = \"Error\";\r\n    LogLevel[LogLevel[\"Warning\"] = 1] = \"Warning\";\r\n    LogLevel[LogLevel[\"Info\"] = 2] = \"Info\";\r\n    LogLevel[LogLevel[\"Verbose\"] = 3] = \"Verbose\";\r\n})(LogLevel || (LogLevel = {}));\r\nvar Logger = /** @class */ (function () {\r\n    function Logger(localCallback, options) {\r\n        if (options === void 0) { options = {}; }\r\n        /**\r\n         * @hidden\r\n         */\r\n        this.level = LogLevel.Info;\r\n        var _a = options.correlationId, correlationId = _a === void 0 ? \"\" : _a, _b = options.level, level = _b === void 0 ? LogLevel.Info : _b, _c = options.piiLoggingEnabled, piiLoggingEnabled = _c === void 0 ? false : _c;\r\n        this.localCallback = localCallback;\r\n        this.correlationId = correlationId;\r\n        this.level = level;\r\n        this.piiLoggingEnabled = piiLoggingEnabled;\r\n    }\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.logMessage = function (logLevel, logMessage, containsPii) {\r\n        if ((logLevel > this.level) || (!this.piiLoggingEnabled && containsPii)) {\r\n            return;\r\n        }\r\n        var timestamp = new Date().toUTCString();\r\n        var log;\r\n        if (!StringUtils.isEmpty(this.correlationId)) {\r\n            log = timestamp + \":\" + this.correlationId + \"-\" + libraryVersion() + \"-\" + LogLevel[logLevel] + (containsPii ? \"-pii\" : \"\") + \" \" + logMessage;\r\n        }\r\n        else {\r\n            log = timestamp + \":\" + libraryVersion() + \"-\" + LogLevel[logLevel] + (containsPii ? \"-pii\" : \"\") + \" \" + logMessage;\r\n        }\r\n        this.executeCallback(logLevel, log, containsPii);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.executeCallback = function (level, message, containsPii) {\r\n        if (this.localCallback) {\r\n            this.localCallback(level, message, containsPii);\r\n        }\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.error = function (message) {\r\n        this.logMessage(LogLevel.Error, message, false);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.errorPii = function (message) {\r\n        this.logMessage(LogLevel.Error, message, true);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.warning = function (message) {\r\n        this.logMessage(LogLevel.Warning, message, false);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.warningPii = function (message) {\r\n        this.logMessage(LogLevel.Warning, message, true);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.info = function (message) {\r\n        this.logMessage(LogLevel.Info, message, false);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.infoPii = function (message) {\r\n        this.logMessage(LogLevel.Info, message, true);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.verbose = function (message) {\r\n        this.logMessage(LogLevel.Verbose, message, false);\r\n    };\r\n    /**\r\n     * @hidden\r\n     */\r\n    Logger.prototype.verbosePii = function (message) {\r\n        this.logMessage(LogLevel.Verbose, message, true);\r\n    };\r\n    Logger.prototype.isPiiLoggingEnabled = function () {\r\n        return this.piiLoggingEnabled;\r\n    };\r\n    return Logger;\r\n}());\r\nexport { Logger };\r\n//# sourceMappingURL=Logger.js.map"]},"metadata":{},"sourceType":"module"}